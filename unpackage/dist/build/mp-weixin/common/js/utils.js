"use strict";const e=require("../vendor.js");const o=new class{constructor(){this.baseUrl="https://code.itndedu.com/pz"}getUserInfo(){e.index.login({success:e=>{this.request({url:"/auth/wxLogin",method:"GET",data:{code:e.code},isShowLoading:!0,success:e=>{console.log(e,"request res")},fail:e=>{console.log(e,"request err")}})}})}request(o={isShowLoading:!1}){if(!o.url)return!1;o.isShowLoading&&this.showLoadingFun(),e.index.request({url:this.baseUrl+o.url,method:o.method?o.method:"GET",data:o.data?o.data:{},header:o.header?o.header:{},success:s=>{e.index.hideLoading(),1e4!=s.data.code?o.fail&&"function"==typeof o.fail&&o.fail(s):o.success&&"function"==typeof o.success&&o.success(s)},fail:o=>{console.log(o,"err"),e.index.hideLoading()}})}showLoadingFun(){e.index.getStorageSync("isShowLoading")&&(e.index.hideLoading(),e.index.setStorageSync("isShowLoading",!1)),e.index.showLoading({title:"加载中...",complete:()=>{e.index.setStorageSync("isShowLoading",!0)},fail:()=>{e.index.setStorageSync("isShowLoading",!1)}})}};exports.Utils=o;
